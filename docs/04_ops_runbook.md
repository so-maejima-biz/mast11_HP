# 運用手順書（Operations Runbook）

## 日常運用

### コンテンツ更新

1. GitHubリポジトリをクローン/プル
2. ローカルで編集
3. `npm run dev` で確認
4. `npm run build` でビルド確認
5. commit & push
6. Cloudflare Pagesが自動デプロイ

### 画像の追加・差し替え

1. `public/images/` に画像を配置
2. ファイル名は半角英数字とハイフンのみ（例：`hero-main.jpg`）
3. 推奨フォーマット：WebP or JPEG（写真）、SVG（ロゴ・アイコン）
4. 最大幅：1920px程度に圧縮
5. ファイルサイズ：500KB以下を目安

---

## トラブルシューティング

### サイトが表示されない

1. Cloudflareダッシュボードでデプロイ状態を確認
2. 最新のデプロイが成功しているか確認
3. DNSが正しく設定されているか確認
4. ブラウザのキャッシュをクリア

### フォームが動作しない

1. ブラウザの開発者ツール → Network タブ
2. `/api/contact` のレスポンスを確認
3. Cloudflareダッシュボード → Functions → ログを確認
4. 環境変数が設定されているか確認

### メールが届かない

1. Resendダッシュボードでログを確認
2. APIキーが有効か確認
3. 送信先メールアドレスが正しいか確認
4. 迷惑メールフォルダを確認

### ビルドが失敗する

1. Cloudflareダッシュボード → Deployments → 失敗したデプロイを選択
2. ビルドログを確認
3. ローカルで `npm run build` を実行して再現確認
4. Node.jsバージョンを確認

---

## 監視項目

| 項目 | 確認方法 | 頻度 |
|------|----------|------|
| サイト表示 | 手動アクセス or 監視ツール | 毎日 |
| フォーム動作 | テスト送信 | 週1回 |
| デプロイ状態 | Cloudflareダッシュボード | push時 |
| エラーログ | Cloudflare Functions ログ | 週1回 |

---

## 定期作業

### 月次

- [ ] Resendの送信数確認（無料枠内か）
- [ ] 依存パッケージのセキュリティアップデート確認
- [ ] アクセス状況確認（導入済みなら）

### 四半期

- [ ] 依存パッケージのメジャーアップデート検討
- [ ] コンテンツの鮮度確認

---

## 連絡先・エスカレーション

| 問題 | 連絡先 |
|------|--------|
| Cloudflare障害 | [Cloudflare Status](https://www.cloudflarestatus.com/) |
| Resend障害 | [Resend Status](https://resend.com/status) |
| コード問題 | GitHubリポジトリ Issue |

---

## 受入チェックリスト（デプロイ後）

- [ ] https://www.mast11.com/ にアクセスできる
- [ ] TOPページが正しく表示される
- [ ] モバイルで表示確認
- [ ] ナビゲーションリンクが動作する
- [ ] お問い合わせフォームが表示される
- [ ] フォーム送信テスト → 成功メッセージ表示
- [ ] 通知メールが届く
- [ ] OGPプレビュー確認（SNSシェア時の表示）
